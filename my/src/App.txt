// src/App.tsx (Hooksã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã‚’è§£æ±ºã™ã‚‹æœ€çµ‚ä¿®æ­£ç‰ˆ)

import { RouterProvider } from '@tanstack/react-router';
import { router } from './router';
import { useInitialLoad } from './hooks/useInitialLoad'; 
// ZUSTANDã‚¹ãƒˆã‚¢ç¾¤ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’å¾©æ´»
import { useCardPool } from './features/card-pool/hooks/useCardPool'; 
import { useDeckStore } from './stores/deckStore'; 
import { useUserDataStore } from './stores/userDataStore'; 
import { usePackStore } from './stores/packStore'; 
import { useCurrencyStore } from './stores/currencyStore'; // âœ… å¿…é ˆ: é€šè²¨ã‚¹ãƒˆã‚¢ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

// MUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ (ãƒ­ãƒ¼ãƒ‰ç”»é¢ç”¨)
import { Box, Typography, CircularProgress, CssBaseline } from '@mui/material';

// âŒ Navbarã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¯ä¸è¦ã«ãªã‚Šã¾ã—ãŸï¼ˆMainLayoutã«ç§»å‹•ã—ãŸãŸã‚ï¼‰
// import Navbar from './components/Navbar'; 


function App() {
    // ğŸ›‘ å¿…é ˆ: å…¨ã¦ã®Zustandã‚¹ãƒˆã‚¢ã®ãƒ•ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã—ã€**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ«ãƒ¼ãƒˆã§ã‚¹ãƒˆã‚¢ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç¢ºç«‹ã—ã¾ã™**ã€‚
    useCardPool();      
    useDeckStore();      
    useUserDataStore(); 
    usePackStore();     
    useCurrencyStore(); // âœ… è¿½åŠ : ã“ã‚ŒãŒä»–ã®Hooksã¨ã®é€£æºã«å¿…è¦ã§ã™
    
    // åˆæœŸãƒ­ãƒ¼ãƒ‰ãƒ•ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã—ã€ãƒ­ãƒ¼ãƒ‰å®Œäº†ã‚’å¾…ã¤ 
    const isReady = useInitialLoad(); 
    
    // ----------------------------------------------------
    // ãƒ­ãƒ¼ãƒ‰å®Œäº†å¾…ã¡
    // ----------------------------------------------------
    if (!isReady) {
        return (
            <CssBaseline>
                 <Box 
                    sx={{ 
                        display: 'flex', 
                        flexDirection: 'column', 
                        justifyContent: 'center', 
                        alignItems: 'center', 
                        minHeight: '100vh' 
                    }}
                >
                    <CircularProgress color="primary" size={60} />
                    <Typography variant="h6" sx={{ mt: 2 }}>
                        ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ãƒ‰ä¸­...
                    </Typography>
                </Box>
            </CssBaseline>
        );
    }
    
    // ----------------------------------------------------
    // ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
    // ----------------------------------------------------
    return (
        <CssBaseline>
            {/* å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚‰ãƒ«ãƒ¼ã‚¿ãƒ¼ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° */}
            <RouterProvider router={router} />
        </CssBaseline>
    );
}

export default App;
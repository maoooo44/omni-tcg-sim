// src/services/pack-logic/packDataService.ts
import type { Pack } from '../../models/pack';
// import { db } from '../database/db'; // DB連携は今回は想定せず、静的データとする

// 💡 ユーザーの pack.ts の型定義に基づき、ダミーデータを作成します。
const DUMMY_PACKS: Pack[] = [
    {
        packId: 'pack-001-base',
        name: 'スターターパック vol.1',
        series: 'Base Set',
        packType: 'Booster',
        cardsPerPack: 5,
        // Common 60%, Uncommon 30%, Rare 10%
        rarityConfig: [
            { rarityName: 'Common', probability: 0.60 },
            { rarityName: 'Uncommon', probability: 0.30 },
            { rarityName: 'Rare', probability: 0.10 },
        ],
        totalCards: 50,
        imageUrl: '/images/pack001.jpg',
        cardBackUrl: '/images/card_back.jpg',
        price: 100, // 100コイン
        description: 'TCGの基本的なカードが収録されたスターター向けパック。',
        releaseDate: '2024-01-01T00:00:00Z',
        userCustom: {},
        isOpened: false, // 💡 追加
    },
    {
        packId: 'pack-002-rare',
        name: 'レアリティコレクション',
        series: 'Premium',
        packType: 'Booster',
        cardsPerPack: 3, // 少量だが高品質
        // Rare 50%, SuperRare 40%, SecretRare 10%
        rarityConfig: [
            { rarityName: 'Rare', probability: 0.50 },
            { rarityName: 'SuperRare', probability: 0.40 },
            { rarityName: 'SecretRare', probability: 0.10 },
        ],
        totalCards: 20,
        imageUrl: '/images/pack002.jpg',
        cardBackUrl: '/images/card_back.jpg',
        price: 500, // 500コイン
        description: '高レアリティカードのみを収録した特別なパック。',
        releaseDate: '2024-03-15T00:00:00Z',
        userCustom: {},
        isOpened: false, // 💡 追加
    },
];

/**
 * 販売中のパックに関する静的データを提供するサービス
 */
export const packDataService = {
    
    /**
     * 販売中のパックリスト全体を取得する
     */
    getAllPacks(): Pack[] {
        // 実際には、パックの静的JSONファイルからデータをロードする
        return DUMMY_PACKS;
    },

    /**
     * 指定されたパックIDの情報を取得する
     */
    getPackById(packId: string): Pack | undefined {
        return DUMMY_PACKS.find(p => p.packId === packId);
    }
};
// src/service/database/db.ts (ä¿®æ­£ãƒ»å…¨æ–‡)

import Dexie, { type Table } from 'dexie';
import { type Pack } from '../../models/pack';
// ğŸ’¡ ä¿®æ­£: db-types.ts ã‹ã‚‰DBã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å‹ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { type DBCardPool, type DBDeck, type DBSetting } from '../../models/db-types'; 

export class OmniTCGSimDB extends Dexie {
  packs!: Table<Pack, string>; 
  
  cardPool!: Table<DBCardPool, string>;
  decks!: Table<DBDeck, string>; // ğŸ’¡ DBDeckå‹ã‚’ä½¿ç”¨
  userSettings!: Table<DBSetting, string>; // ğŸ’¡ userSettingsãƒ†ãƒ¼ãƒ–ãƒ«ã®è¿½åŠ 

  constructor() {
    super('OmniTCGSimDB');
    this.version(1).stores({
      packs: '&packId, name, series', 
      cardPool: '&cardId', 
      decks: '&deckId', // ãƒ‡ãƒƒã‚­ãƒ†ãƒ¼ãƒ–ãƒ«
      userSettings: '&key', // è¨­å®šãƒ†ãƒ¼ãƒ–ãƒ«
    });
  }
}

export const db = new OmniTCGSimDB();